# Модель данных

## Источники данных
- FlightRadar24 API - источник сырых данных о рейсах

## База данных (совокупность файлов .csv в директории /data (все данные в файлах имеют тип данных 'str')) имеет следующие сущности (таблицы):

### 1. parse.csv (сырые данные)
Структура:
- icao, &mdash; icao маршрута
- callsign, &mdash; позывной маршрута (считаем его ключевым признаком)
- model, &mdash; модель самолета
- airline, &mdash; авиалиния
- trail, &mdash; маршрут самолета
- time &mdash; время получения информации

### 2. hourly_report.csv (часовой отчет). Сюда записываются данные за последний час. Если маршрут вышел из акватории Черного моря более часа назад, то он удаляется. 
### Если самолет все еще над Черным морем, то его маршрут обновляется с учетом свежих данных
Структура:
- icao, &mdash; icao маршрута
- callsign, &mdash; позывной маршрута (считаем его ключевым признаком)
- model, &mdash; модель самолета
- airline, &mdash; авиалиния
- trail, &mdash; маршрут самолета
- time &mdash; время получения информации

Правила обновления:
- Данные сохраняются только за последние 60 минут
- Устаревшие записи удаляются каждые 3.5 минуты

### 3. airline_report.csv (отчет по авиакомпаниям)
Структура:
- airline, &mdash; список всех авиалиний
- numb &mdash; количество самолетов, принадлежащих данной авиалинии

### 4. model_report.csv (отчет по моделям самолетов)
Структура:
- model, &mdash; список всех моделей самолетов
- numb &mdash; список всех моделей самолетов

## ER-диаграмма

[![er-csv.png](https://i.postimg.cc/02zyrzkN/er-csv.png)](https://postimg.cc/hfqB5P7F)

## Диаграмма взаимодействия
    A[main.py] --> B[collector.py] 
    A --> C[processing.py]
    A --> D[dashboard.py]
    E[FlightRadar24 API] --> B

    B --> F [parse.csv]
    
    F --> C{processing.py}
    
    C --> G[hourly_report.csv]
    
    C --> H[airline_report.csv]
    
    C --> I[model_report.csv]
    
    G --> D
    
    H --> D
    
    I --> D
